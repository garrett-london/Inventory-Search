<div class="inventory-search">
    <form [formGroup]="form" (ngSubmit)="onSearch()" class="form">
        <div class="row">
            <label>
                Criteria
                <input formControlName="criteria"
                       (keyup.enter)="onEnterKey()"
                       placeholder="Enter part number, description, or SKU" />
            </label>

            <label>
                Search by
                <select formControlName="by">
                    <option value="PartNumber">Part Number</option>
                    <option value="Description">Description</option>
                    <option value="SupplierSKU">Supplier SKU</option>
                </select>
            </label>

            <div class="field">
                <label class="field__label" for="branches-select">
                    Branches
                </label>

                <branch-multi-select id="branches-select"
                                     formControlName="branches">
                </branch-multi-select>
            </div>
            <!-- - Availability toggle for inventory-only results -->
            <label class="checkbox">
                <input type="checkbox" formControlName="onlyAvailable" />
                Only available
            </label>

            <button type="submit" [disabled]="form.invalid || (loading$ | async)">Search</button>
        </div>
    </form>

    <div class="loading" *ngIf="loading$ | async">Loading...</div>
    <div class="error" *ngIf="errorMessage">{{ errorMessage }}</div>

    <div class="results-wrapper"
         [class.results-wrapper--disabled]="loading$ | async">
        <inventory-results-table [items]="items$ | async"
                                 [total]="(total$ | async) ?? 0"
                                 [pageSize]="pageSize"
                                 [pageIndex]="currentPage"
                                 (sort)="onSort($event)"
                                 (pageChange)="onPageChange($event)">
        </inventory-results-table>
    </div>
</div>
